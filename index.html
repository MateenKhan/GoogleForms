<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://getbootstrap.com/docs/5.3/assets/css/docs.css"
      rel="stylesheet"
    />
    <title>Bootstrap Example</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
      integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.14.1/jquery-ui.min.js"
      integrity="sha512-MSOo1aY+3pXCOCdGAYoBZ6YGI0aragoQsg1mKKBHXCYPIWxamwOE7Drh+N5CPgGI5SA9IEKJiPjdfqWFWmZtRA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.14.1/themes/base/jquery-ui.min.css"
      integrity="sha512-TFee0335YRJoyiqz8hA8KV3P0tXa5CpRBSoM0Wnkn7JoJx1kaq1yXL/rb8YFpWXkMOjRcv5txv+C6UluttluCQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <style>
      .input-error {
        outline: 1px solid red;
      }
      .ui-widget-header {
        background: #acd3ff;
      }

      .ui-widget-content .ui-state-default:hover {
        background: #acd3ff;
        border-radius: 2px;
      }

      .Customizations {
        height: 6rem;
      }
    </style>
  </head>
  <body class="">
    <div>
      <form id="create_orders_form" method="POST">
        <div class="container">
          <div class="row align-items-center">
            <div class="col-sm-12 col-lg-6">
              <h1>Customer Details</h1>
              <div class="mb-3">
                <label for="Name" class="form-label">Name</label>
                <input
                  type="text"
                  class="form-control"
                  id="Name"
                  required="true"
                  name="Name"
                  aria-describedby="Name"
                />
                <div id="Name" class="form-text">Please enter your Name</div>
              </div>

              <div class="mb-3">
                <label for="Phone" class="form-label">Phone</label>
                <input
                  name="Phone"
                  type="number"
                  class="form-control"
                  id="Phone"
                  required="true"
                  aria-describedby="Phone"
                />
                <div id="Phone" class="form-text">
                  Please enter your Phone Number
                </div>
              </div>

              <div class="mb-3">
                <label for="Alternate" class="form-label"
                  >Alternate Phone</label
                >
                <input
                  name="Alternate"
                  type="number"
                  class="form-control"
                  id="Alternate"
                  required="true"
                  aria-describedby="Name"
                />
                <div id="Alternate" class="form-text">
                  Please enter your alternnate phone number
                </div>
              </div>
            </div>

            <div class="col-sm-12 col-lg-6">
              <h1>Order Details</h1>
              <div class="mb-3">
                <label for="Customizations" class="form-label"
                  >Customizations</label
                >
                <textarea
                  name="Customizations"
                  type="text"
                  class="form-control Customizations"
                  id="Customizations"
                  aria-describedby="Customizations"
                ></textarea>
                <div id="Customizations" class="form-text">
                  (name, date, size, colour, link, etc )
                </div>
              </div>

              <div class="form-check form-switch">
                <input
                  name="product_type"
                  class="form-check-input"
                  type="checkbox"
                  role="switch"
                  id="product_type"
                />
                <label class="form-check-label" for="product_type"
                  >Square</label
                >
              </div>

              <div class="mb-3" id="round">
                <label for="Diameter" class="form-label">Diameter</label>
                <input
                  name="Diameter"
                  type="number"
                  class="form-control"
                  id="Diameter"
                  aria-describedby="Diameter"
                />
                <div id="Diameter" class="form-text">
                  Please enter in inches
                </div>
              </div>

              <div class="mb-3" id="square">
                <div class="row">
                  <div class="col-5">
                    <label for="Length" class="form-label">Length</label>
                    <input
                      name="Length"
                      type="number"
                      class="form-control"
                      id="Length"
                      aria-describedby="Length"
                    />
                    <div id="Length" class="form-text">
                      Please Length in inches
                    </div>
                  </div>
                  <div class="col-2">
                    <br />
                    X
                  </div>
                  <div class="col-5">
                    <label for="Height" class="form-label">Height</label>
                    <input
                      name="Height"
                      type="number"
                      class="form-control"
                      id="Height"
                      aria-describedby="Height"
                    />
                    <div id="Height" class="form-text">
                      Please Length in inches
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="d-grid gap-2">
            <button type="submit" class="btn btn-primary" id="submit_btn">
              <span
                class="loading spinner-border spinner-border-sm"
                aria-hidden="true"
              ></span>
              <span class="loading" role="status">Loading...</span>
              <span class="loaded">Submit</span>
            </button>
          </div>
        </div>
      </form>
    </div>
  </body>
  <script>
    $(document).ready(function () {
      loadDefauts();
      let product_type = $("#product_type");
      product_type.click(function () {
        $("#round").toggle();
        $("#square").toggle();
      });

      // $("#Diameter").inputFilter(function (value) {
      //   return /^\d*$/.test(value);
      // }, "Must be an unsigned integer");

      $("#delivery_date").datepicker({
        minDate: -20,
        maxDate: "+1M",
        minDate: "+7D",
      });
    });
    window.addEventListener("load", function () {
      const form = document.getElementById("create_orders_form");
      form.addEventListener("submit", function (e) {
        e.preventDefault();
        loading();
        let submit_url =
          "https://script.google.com/macros/s/AKfycbwMVFZNwhuCXAHf_jz1o5gtxHWDfUYc2-RfJFYH_EkHw7Z_e2qz46aIJmEo1yz-2HUh/exec";
        const form_obj = new FormData(form);
        let product_type =
          $("#product_type").attr("checked") == "on" ? "Square" : "Round";
        form_obj.append("product_type", product_type);
        fetch(submit_url, {
          redirect: "follow",
          method: "POST",
          body: form_obj,
        }).then(() => {
          console.log("fprm Created Successfully");
          loadDefauts();
        });
      });
    });

    function loadDefauts() {
      document.getElementById("create_orders_form").reset();
      $("#square").hide();
      $("#round").show();
      $("#submit_btn").removeAttr("disabled");
      $("#Name").focus();
      $(".loading").hide();
      $(".loaded").show();
    }

    function loading() {
      $("#submit_btn").attr("disabled", true);
      $(".loading").show();
      $(".loaded").hide();
    }
  </script>
</html>
